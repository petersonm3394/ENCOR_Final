---
- name: Verify Routing Configuration
  hosts: routers
  gather_facts: no

  tasks:

    - name: Show IPv6 OSPF routes
      ios_command:
        commands:
          - show ipv6 route ospf
      register: ipv6_ospf_routes

    - name: Display IPv6 OSPF routes
      debug:
        var: ipv6_ospf_routes.stdout_lines

    - name: Show IP BGP summary (from ISP-connected router)
      ios_command:
        commands:
          - show ip bgp summary
      register: bgp_summary
      when: inventory_hostname in ['R1', 'R2']

    - name: Display BGP summary
      debug:
        var: bgp_summary.stdout_lines
      when: inventory_hostname in ['R1', 'R2']

    - name: Show IP BGP routes (BGP-learned default route)
      ios_command:
        commands:
          - show ip route bgp
      register: bgp_routes

    - name: Display BGP routes
      debug:
        var: bgp_routes.stdout_lines

    - name: Show IP OSPF routes
      ios_command:
        commands:
          - show ip route ospf
      register: ospf_routes

    - name: Display OSPF routes
      debug:
        var: ospf_routes.stdout_lines

    - name: Show IPv6 OSPF neighbors
      ios_command:
        commands:
          - show ipv6 ospf neighbor
      register: ipv6_ospf_neighbors
      when: inventory_hostname in ['R1', 'R3']

    - name: Display IPv6 OSPF neighbors
      debug:
        var: ipv6_ospf_neighbors.stdout_lines
      when: inventory_hostname in ['R1', 'R3']
